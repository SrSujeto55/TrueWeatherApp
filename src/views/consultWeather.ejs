<!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>consutl</title>
    </head>
    <body>
        <p id="MsjErr"></p>
        <form id="coordForm">
            <label for="coordinates">Coordinates</label>
            <input type="text" name="coordinates" id="coordinates" placeholder="40.22 -74.99">
            <button type="submit">Request</button>
        </form>
            <div id="WeatherInfo">
                <h1 id="temp"> Temperature: </h1>
                <h1 id="humidity"> humidity: </h1>
                <h1 id="wind"> Wind: </h1>
                <h1 id="clouds"> Clouds: </h1>
                <h1 id="cityname"> City: </h1> 
            </div>

            <script>
                const error = document.querySelector('#MsjErr');
                const form = document.querySelector('#coordForm');
                const temp = document.querySelector('#temp');
                const humidity = document.querySelector('#humidity');
                const wind = document.querySelector('#wind');
                const clouds = document.querySelector('#clouds');
                const city = document.querySelector('#cityname');

                form.addEventListener('submit', e => {
                    e.preventDefault();

                    formData = new FormData(form);
                    fetch('/setcoords', {
                        method: 'POST',
                        body: formData
                    })
                    .then(request => request.json())
                    .then(data => 
                    {
                        if(data.cod != 400){
                            error.textContent = '';
                            temp.textContent = 'Temperature: ' + data.temp + 'Â°';
                            humidity.textContent = 'humidity: ' + data.humidity + '%';
                            wind.textContent = 'Wind: ' + data.wind + 'm/s';
                            clouds.textContent = 'Clouds: ' + data.clouds + '%';
                            city.textContent = 'City: ' + data.cityName;
                        }else{
                            error.textContent = 'Coordenadas incorrectas, intente de nuevo';
                        }
                    });
                })
            </script>
        </form>
    </body>
</html>